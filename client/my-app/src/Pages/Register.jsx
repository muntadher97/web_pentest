import React, { useState } from 'react'
import { Link } from 'react-router-dom'
import axios from "axios"
function Register() {
  const [input,setInput]=useState({
    username:"",
    password:"",
    email:"",
  })

  
  const [err,setErr]=useState(null);
  const handleChange= e =>{
    setInput(prev=>({...prev,[e.target.name]:e.target.value}))
  }
 
  
  const handleSubmit= async e=>{
      e.preventDefault()
      try {
        const res=await axios.post("/auth/register",input)
        console.log(res)
      } catch (error) {
        setErr(error.response.data);
      }
      
  }
  return (
    <div className='auth'>
      <h1>
        Register
      </h1>
      <form action="">
        <input required type="text" name="username" placeholder='username' onChange={handleChange}/>
        <input required type="password" name='password' placeholder='Password' onChange={handleChange}/>
        <input required type="email" name='email' placeholder='email' onChange={handleChange}/>
        <button onClick={handleSubmit}>Register</button>
          {err&&<p>{err}</p>}
        <span>Do you have an account?<Link to='/Login'>Login</Link></span>
      </form>
    </div>
  )
}

export default Register